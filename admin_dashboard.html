<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinic System - Backup & Recovery Testing</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
            color: #333;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 25px;
            margin-bottom: 30px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        .btn-primary:hover {
            background-color: #2980b9;
        }
        .btn-danger {
            background-color: #e74c3c;
            color: white;
        }
        .btn-danger:hover {
            background-color: #c0392b;
        }
        .btn-success {
            background-color: #2ecc71;
            color: white;
        }
        .btn-success:hover {
            background-color: #27ae60;
        }
        .status-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-active {
            background-color: #2ecc71;
        }
        .status-inactive {
            background-color: #e74c3c;
        }
        .log-container {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            margin-top: 20px;
        }
        .progress-bar {
            height: 20px;
            background-color: #ecf0f1;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background-color: #3498db;
            width: 0%;
            transition: width 0.5s;
        }
        .metric-cards {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        .metric-card {
            flex: 1;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
        }
        .metric-value {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
            color: #3498db;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        tr:hover {
            background-color: #f5f7fa;
        }
        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .alert-warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
        }
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Clinic System Backup & Recovery Testing</h1>
        <p>Validate your database backup and recovery procedures</p>
    </div>

    <div class="container">
        <div class="alert alert-warning">
            <strong>Note:</strong> This is a simulation interface. Actual backup/recovery operations would connect to your database systems.
        </div>

        <div class="metric-cards">
            <div class="metric-card">
                <h3>Last Backup</h3>
                <div class="metric-value" id="lastBackupTime">2 hours ago</div>
                <p>Database: clinic_records</p>
            </div>
            <div class="metric-card">
                <h3>Backup Size</h3>
                <div class="metric-value" id="backupSize">1.2 GB</div>
                <p>Compressed: 450 MB</p>
            </div>
            <div class="metric-card">
                <h3>Recovery Time</h3>
                <div class="metric-value" id="recoveryTime">8 min 32s</div>
                <p>Last test: Today 10:15 AM</p>
            </div>
        </div>

        <div class="card">
            <h2>Backup Operations</h2>
            <div class="status-line">
                <span class="status-indicator status-active"></span>
                <strong>Backup Service Status:</strong> Active
            </div>
            <p>Current backup schedule: Daily at 2:00 AM (Full) + Hourly Incremental</p>
            
            <div class="progress-bar">
                <div class="progress" id="backupProgress"></div>
            </div>
            
            <div class="button-group">
                <button class="btn btn-primary" onclick="runManualBackup()">Run Manual Backup</button>
                <button class="btn btn-danger" onclick="simulateBackupFailure()">Simulate Backup Failure</button>
                <button class="btn" onclick="changeBackupSchedule()">Change Schedule</button>
            </div>

            <h3 style="margin-top: 30px;">Recent Backup Logs</h3>
            <div class="log-container" id="backupLogs">
                [2023-11-15 02:00:15] Starting full database backup...
                [2023-11-15 02:12:43] Backup completed successfully (1.2 GB)
                [2023-11-15 03:00:02] Incremental backup started
                [2023-11-15 03:02:18] Incremental backup completed (45 MB)
                [2023-11-15 04:00:01] Incremental backup started
                [2023-11-15 04:01:55] Incremental backup completed (38 MB)
            </div>
        </div>

        <div class="card">
            <h2>Recovery Testing</h2>
            <div class="status-line">
                <span class="status-indicator status-active"></span>
                <strong>Recovery System Status:</strong> Operational
            </div>
            
            <div class="alert alert-success" id="recoveryAlert" style="display: none;">
                Recovery test completed successfully! All data was restored correctly.
            </div>
            
            <div class="form-group">
                <label for="recoveryPoint">Select Recovery Point:</label>
                <select id="recoveryPoint" class="form-control">
                    <option value="latest">Latest Backup (Today 04:00 AM)</option>
                    <option value="yesterday">Yesterday's Full Backup</option>
                    <option value="week">1 Week Ago</option>
                    <option value="custom">Custom Point-in-Time</option>
                </select>
            </div>
            
            <div class="button-group">
                <button class="btn btn-primary" onclick="testRecovery()">Test Recovery</button>
                <button class="btn btn-danger" onclick="simulateDatabaseFailure()">Simulate Database Failure</button>
            </div>

            <div class="progress-bar">
                <div class="progress" id="recoveryProgress"></div>
            </div>

            <h3 style="margin-top: 30px;">Recovery Test Results</h3>
            <table>
                <thead>
                    <tr>
                        <th>Test Date</th>
                        <th>Recovery Point</th>
                        <th>Status</th>
                        <th>Duration</th>
                        <th>Data Integrity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2023-11-15 10:15</td>
                        <td>Today 04:00 AM</td>
                        <td><span class="status-indicator status-active"></span>Success</td>
                        <td>8 min 32s</td>
                        <td>100% verified</td>
                    </tr>
                    <tr>
                        <td>2023-11-14 09:30</td>
                        <td>Yesterday 02:00 AM</td>
                        <td><span class="status-indicator status-active"></span>Success</td>
                        <td>7 min 18s</td>
                        <td>100% verified</td>
                    </tr>
                    <tr>
                        <td>2023-11-10 14:45</td>
                        <td>1 Week Ago</td>
                        <td><span class="status-indicator status-active"></span>Success</td>
                        <td>9 min 05s</td>
                        <td>100% verified</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="card">
            <h2>Backup Configuration</h2>
            <div class="form-group">
                <label><input type="checkbox" checked> Enable Automated Backups</label>
            </div>
            <div class="form-group">
                <label>Full Backup Frequency:</label>
                <select class="form-control">
                    <option>Daily</option>
                    <option selected>Weekly</option>
                    <option>Monthly</option>
                </select>
            </div>
            <div class="form-group">
                <label>Incremental Backup Frequency:</label>
                <select class="form-control">
                    <option>Every 15 minutes</option>
                    <option>Every 30 minutes</option>
                    <option selected>Hourly</option>
                    <option>Every 2 hours</option>
                </select>
            </div>
            <div class="form-group">
                <label>Retention Policy:</label>
                <select class="form-control">
                    <option>7 days</option>
                    <option selected>30 days</option>
                    <option>90 days</option>
                    <option>1 year</option>
                </select>
            </div>
            <button class="btn btn-success">Save Configuration</button>
        </div>
    </div>

    <script>
        // Simulate manual backup process
        function runManualBackup() {
            const progressBar = document.getElementById('backupProgress');
            const logs = document.getElementById('backupLogs');
            
            logs.innerHTML += '\n[2023-11-15 14:25:01] Manual backup initiated by admin...';
            logs.scrollTop = logs.scrollHeight;
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                progressBar.style.width = progress + '%';
                
                if (progress % 20 === 0) {
                    logs.innerHTML += `\n[2023-11-15 14:25:${10+(progress/5)}] Backup in progress (${progress}%)...`;
                    logs.scrollTop = logs.scrollHeight;
                }
                
                if (progress >= 100) {
                    clearInterval(interval);
                    logs.innerHTML += '\n[2023-11-15 14:27:45] Manual backup completed successfully (1.3 GB)';
                    logs.scrollTop = logs.scrollHeight;
                    document.getElementById('lastBackupTime').textContent = 'Just now';
                    document.getElementById('backupSize').textContent = '1.3 GB';
                }
            }, 300);
        }

        // Simulate backup failure
        function simulateBackupFailure() {
            const logs = document.getElementById('backupLogs');
            logs.innerHTML += '\n[2023-11-15 14:28:10] Backup process started...';
            logs.innerHTML += '\n[2023-11-15 14:28:35] ERROR: Storage allocation failed!';
            logs.innerHTML += '\n[2023-11-15 14:28:35] Backup process failed!';
            logs.scrollTop = logs.scrollHeight;
            
            alert('Backup failure simulated! Check logs for details.');
        }

        // Test recovery process
        function testRecovery() {
            const recoveryPoint = document.getElementById('recoveryPoint').value;
            const progressBar = document.getElementById('recoveryProgress');
            const alertBox = document.getElementById('recoveryAlert');
            
            alertBox.style.display = 'none';
            progressBar.style.width = '0%';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 2;
                progressBar.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    alertBox.style.display = 'block';
                    document.getElementById('recoveryTime').textContent = '5 min 18s';
                    
                    // Add to test results
                    const tbody = document.querySelector('table tbody');
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `
                        <td>${new Date().toISOString().split('T')[0]} ${new Date().getHours()}:${new Date().getMinutes()}</td>
                        <td>${document.getElementById('recoveryPoint').options[document.getElementById('recoveryPoint').selectedIndex].text}</td>
                        <td><span class="status-indicator status-active"></span>Success</td>
                        <td>5 min 18s</td>
                        <td>100% verified</td>
                    `;
                    tbody.insertBefore(newRow, tbody.firstChild);
                }
            }, 200);
        }

        // Simulate database failure
        function simulateDatabaseFailure() {
            if (confirm('WARNING: This will simulate a complete database failure. Continue?')) {
                alert('Database failure simulated! All tables are now inaccessible. Initiate recovery procedure.');
            }
        }

        // Change backup schedule
        function changeBackupSchedule() {
            alert('In a real implementation, this would open a schedule configuration dialog.');
        }
    </script>
</body>
</html>